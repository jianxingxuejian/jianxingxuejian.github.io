# å¦‚ä½•å®šä¹‰ä¸€ä¸ªå‡½æ•°

MDN å…³äºå‡½æ•°çš„å®šä¹‰ä¸ä½¿ç”¨ [js æŒ‡å—-å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions) [js å‚è€ƒ-å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions) [js å‚è€ƒ-å‡½æ•°è¡¨è¾¾å¼](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/function)

```javascript
// å‡½æ•°å£°æ˜
function square(value) {
	return value * value
}
// å‡½æ•°è¡¨è¾¾å¼çš„å…·åå‡½æ•°å½¢å¼
const square = function square(value) {
	return value * value
}
// å‡½æ•°è¡¨è¾¾å¼çš„åŒ¿åå‡½æ•°å½¢å¼
const square = function (value) {
	return value * value
}
// å‡½æ•°è¡¨è¾¾å¼çš„ç®­å¤´å‡½æ•°å½¢å¼
const square = value => {
	return value * value
}
// åªæœ‰ä¸€æ¡è¯­å¥æ—¶å¯çœç•¥èŠ±æ‹¬å·å’Œreturn
const square = value => value * value
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œå®šä¹‰å‡½æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼Œç”¨ function å…³é”®è¯å£°æ˜çš„å«å‡½æ•°å£°æ˜(**function definition**/**function declaration**/**function statement**)ï¼Œå‡½æ•°èµ‹äºˆç»™å˜é‡çš„å«å‡½æ•°è¡¨è¾¾å¼(**function expression**)ã€‚

å®ƒä»¬æœ‰å¦‚ä¸‹åŒºåˆ«ï¼š

å‡½æ•°å£°æ˜å­˜åœ¨**å‡½æ•°æå‡(Function hoisting)**ï¼Œå› æ­¤å¯ä»¥å…ˆä½¿ç”¨ï¼Œåå£°æ˜ï¼Œè€Œå‡½æ•°è¡¨è¾¾å¼åˆ™ä¸è¡Œã€‚

```javascript
test() // å¯ä»¥ç›´æ¥è°ƒç”¨å‡½æ•°
function test() {
	console.log('test')
}

const test = () => console.log('test')
test() // åªèƒ½å…ˆå£°æ˜å†è°ƒç”¨
```

æŸäº›åœºæ™¯ä¸‹å‡½æ•°è¡¨è¾¾å¼æ›´åŠ çµæ´»ï¼ŒJSX/TSX å¯èƒ½ä¼šæ›´åŠ å–œæ¬¢è¿™ç§æ–¹å¼ã€‚

```javascript
let test
if (flag) {
	test = x => {
		const value = 10
		return x * value
	}
} else {
	test = x => {
		const value = 20
		return x * value
	}
}
test(10)
```

é™¤æ¬¡ä¹‹å¤–ï¼Œä¸¤ç§å£°æ˜æ–¹å¼æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚

ç”±äºä¸¤ç§å£°æ˜æ–¹å¼æœ‰å·®åˆ«ï¼Œå› æ­¤ç½‘ä¸Šç»å¸¸èƒ½çœ‹åˆ°ç›¸å…³çš„è®¨è®º(æ–—äº‰)ï¼Œç”šè‡³æœ‰çš„å…¬å¸è§„å®šå®šä¹‰å‡½æ•°å¿…é¡»ä½¿ç”¨å‡½æ•°å£°æ˜ï¼Œæœ‰çš„å…¬å¸è§„å®šå¿…é¡»ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œä¸¤ä¸ªæ´¾åˆ«éƒ½è®¤ä¸ºè‡ªå·±çš„åšæ³•æ‰æ˜¯å‡½æ•°å®šä¹‰çš„æœ€ä½³å®è·µã€‚

å‡½æ•°å£°æ˜æ´¾çš„è§‚ç‚¹ï¼šå‡½æ•°å°±åº”è¯¥è¢«æå‡è‡³ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼›ç›¸æ¯”ç®­å¤´å‡½æ•°å½¢å¼çš„å‡½æ•°è¡¨è¾¾å¼ï¼Œå‡½æ•°å£°æ˜æ›´åŠ ç®€æ´ã€‚

å‡½æ•°è¡¨è¾¾å¼æ´¾çš„è§‚ç‚¹ï¼šå‡½æ•°å°±åº”è¯¥å…ˆå®šä¹‰ç„¶åä½¿ç”¨ï¼Œéµå¾ªä»ä¸Šè‡³ä¸‹çš„åŸåˆ™ï¼Œé¿å…éšå½¢ bugã€‚

å¤§éƒ¨åˆ†å‡½æ•°è¡¨è¾¾å¼æ´¾éƒ½æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°å½¢å¼ï¼Œè€Œ airbnb çš„ js é£æ ¼æŒ‡å—åˆ™æ˜¯æ¨èä½¿ç”¨å…·åå‡½æ•°å½¢å¼ï¼Œå› ä¸ºé”™è¯¯è°ƒç”¨å †æ ˆä¸­çš„åŒ¿åå‡½æ•°å¯èƒ½éš¾ä»¥è¿½è¸ª [åœ°å€](https://github.com/airbnb/javascript#functions)

```javascript
// bad
function foo() {
  // ...
}
// bad
const foo = function () {
  // ...
}
// good
// lexical name distinguished from the variable-referenced invocation(s)
const short = function longUniqueMoreDescriptiveLexicalFoo() {
  // ...
}
```

æˆ‘ç›®å‰çš„ä½¿ç”¨æ–¹å¼ï¼šå¤§éƒ¨åˆ†å‡½æ•°ä½¿ç”¨å‡½æ•°å£°æ˜ï¼Œå°‘éƒ¨åˆ†å‡½æ•°ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ã€‚

ç›¸æ¯”å‡½æ•°è¡¨è¾¾å¼ï¼Œå‡½æ•°å£°æ˜çš„ function å…³é”®å­—æ›´åŠ ç›´è§‚äº†ç„¶ï¼Œå¾ˆæ¸…æ™°çš„ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å¯¹äºä¸€ä¸ªæ¨¡å—è€Œè¨€ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡ï¼Œæˆ‘ä»¬èƒ½æŠŠå¤šä¸ªå‡½æ•°æŒ‰ç…§é‡è¦æ€§/ä½¿ç”¨é¢‘ç‡/è°ƒç”¨é¡ºåºç­‰è¿›è¡Œç»„ç»‡ï¼Œè€Œä¸éœ€è¦æŠŠæ— å…³ç´§è¦çš„å‡½æ•°æ”¾åœ¨å‰é¢ã€‚~~è¿˜æœ‰ vue å•æ–‡ä»¶ä¸‹å¸¦æœ‰æ³›å‹çš„ç®­å¤´å‡½æ•°ä¼šè¢« volar è¯†åˆ«æˆ JSXã€‚~~

ä»é¿å…æµªè´¹çš„è§’åº¦æ¥è¯´ï¼ŒæŸäº›å‡½æ•°ä»¥å‡½æ•°è¡¨è¾¾å¼å£°æ˜ä¹Ÿæ˜¯ä¸ªå¥½å®è·µï¼Œå› ä¸ºå‡½æ•°å£°æ˜ä¼šåœ¨ä»£ç æ‰§è¡Œå‰åˆ›å»ºï¼Œå³ä½¿æ²¡æœ‰è°ƒç”¨ä¹Ÿå ç”¨å†…å­˜ç©ºé—´ï¼Œè€Œå‡½æ•°è¡¨è¾¾å¼æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹æ—¶æ‰è¿›è¡Œåˆ›å»ºï¼Œè°ƒç”¨åç«‹å³é‡Šæ”¾ã€‚å½“ç„¶å®é™…ç¼–ç¨‹ä¸­ï¼ŒäºŒè€…çš„åŒºåˆ«å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

æœ‰å…´è¶£çš„è¯å¯ä»¥çœ‹ä¸‹ StackOverflow ä¸Šå…³äºå®ƒä»¬çš„è®¨è®º [åœ°å€](https://stackoverflow.com/questions/336859/var-functionname-function-vs-function-functionname)

ä¸ºä»€ä¹ˆå£°æ˜å‡½æ•°ä¼šæœ‰ 2 ç§æˆªç„¶ä¸åŒçš„æ–¹å¼å‘¢ï¼Œè¿™æ˜¯å› ä¸º js ä¸­çš„å‡½æ•°æ˜¯å¤´ç­‰å‡½æ•°(**First-class Function**)ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå‡½æ•°å¯ä»¥è¢«å½“ä½œå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œè¿˜å¯ä»¥è¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚è™½ç„¶ js ä¸­çš„å‡½æ•°çœ‹èµ·æ¥æ˜¯å‡½æ•°ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯å¯¹è±¡ï¼Œå®ƒé™¤äº†å…·æœ‰å‡½æ•°å¼çš„ç‰¹ç‚¹å¤–ï¼ŒåŒæ—¶è¿˜å…·æœ‰é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼Œå› æ­¤åœ¨ js ä¸­ä½ è¿˜èƒ½ç»™ä¸€ä¸ªå‡½æ•°è®¾ç½®å±æ€§ï¼Œç”šè‡³ç»™å‡½æ•°è®¾ç½®ä¸€ä¸ªå‡½æ•°ï¼š

```javascript
function test() {
	console.log(1)
}
test.x = 'x'
test.y = value => console.log(value)

test() // è¾“å‡º1
console.log(test.x) // è¾“å‡ºx
test.y(2) // è¾“å‡º2
```

ä¸è¦è¢«å‡½æ•°å¼ç¼–ç¨‹è¿·æƒ‘ä½ï¼Œåªæœ‰æ·±åˆ»ç†è§£äº†é¢å‘å¯¹è±¡ï¼Œä½ æ‰èƒ½çœ‹æ‡‚å„å¼å„æ ·çš„â€œé­”æ³•â€æ“ä½œ ğŸ¤£ã€‚

**è¸©å‘æ—¶é—´ï¼š**

å‡½æ•°éœ€è¦å®šä¹‰åœ¨ä¸€å¯¹èŠ±æ‹¬å·ä¸­ï¼Œä½†æ˜¯èŠ±æ‹¬å·åœ¨ js ä¸­æœ‰ä¸¤ä¸ªè¯­ä¹‰ï¼Œblock å’Œå¯¹è±¡ï¼Œæœ‰æ­§ä¹‰çš„åœ°æ–¹ä¼šä¼˜å…ˆè§£é‡Šä¸º blockï¼Œå› æ­¤ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼š

```javascript
const test = value => { value }
console.log(test(1))
```

è¯•å›¾å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å‚æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œæ­¤å¤„ä»¥ä¸ºä¼šè¿”å› { value: 1 } ï¼Œå®é™…ä¸Šä¼šè¿”å› undefined(æ— è¿”å›å€¼çš„å‡½æ•°é»˜è®¤ä¼šè¿”å› undefined)ã€‚è™½ç„¶å•è¡Œè¯­å¥å¯ä»¥çœç•¥èŠ±æ‹¬å·å’Œ returnï¼Œä½†è¿™é‡Œå‘ç”Ÿäº†æ­§ä¹‰ï¼Œå› æ­¤ä¸èƒ½çœç•¥ï¼Œå³ä½¿åªæœ‰ä¸€è¡Œä¹Ÿè¦æŒ‰ç…§å¤šè¡Œè¯­å¥æ¥å†™ã€‚

```javascript
const test1 = value => {
	return { value }
}
const test2 = value => ({ value })
console.log(test1(1), test2(2)) // æˆåŠŸæ‰“å°å‡º { value: 1 } å’Œ { value: 2 }
```
